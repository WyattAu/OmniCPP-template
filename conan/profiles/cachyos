# Conan profile for CachyOS (GCC optimized)
# Reference: ADR-034-conan-profile-expansion.md
# Reference: ADR-028-cachyos-primary-linux-target.md
# Requirement: REQ-004-005
#
# Usage:
#   conan install . --profile cachyos
#   conan build . --profile cachyos
#
# This profile configures:
# - GCC 13 compiler (CachyOS default)
# - C++23 standard
# - Release build type
# - Linux x86_64 architecture
# - libstdc++11 C++ library
# - CMake toolchain integration with Ninja generator
# - CachyOS-specific optimizations:
#   - -march=native: Optimize for host CPU architecture
#   - -O3: Maximum optimization level
#   - -flto: Link-time optimization for better performance
#   - -DNDEBUG: Disable assertions in release builds
# - Linker flags for security and optimization:
#   - --as-needed: Only link libraries that are actually used
#   - --no-undefined: Fail if any undefined symbols remain

[settings]
os=Linux
arch=x86_64
compiler=gcc
compiler.version=13
compiler.libcxx=libstdc++11
compiler.cppstd=23
build_type=Release

[conf]
tools.cmake.cmaketoolchain:system_name=Linux
tools.cmake.cmaketoolchain:generator=Ninja
tools.build:compiler_executables={"c": "gcc", "cpp": "g++"}
tools.build:cxxflags=-march=native -O3 -flto -DNDEBUG
tools.build:cflags=-march=native -O3 -flto -DNDEBUG
tools.build:sharedlinkflags=-Wl,--as-needed -Wl,--no-undefined -flto
tools.build:exelinkflags=-Wl,--as-needed -Wl,--no-undefined -flto

[options]
vulkan/*:shared=True

[buildenv]
CC=gcc
CXX=g++
CFLAGS=-march=native -O3 -flto -DNDEBUG
CXXFLAGS=-march=native -O3 -flto -DNDEBUG
LDFLAGS=-Wl,--as-needed -Wl,--no-undefined -flto
